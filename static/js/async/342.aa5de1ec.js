"use strict";(self.webpackChunk_nan_design_docs=self.webpackChunk_nan_design_docs||[]).push([["342"],{7186:function(e,n,r){r.r(n),r.d(n,{default:function(){return l}});var t=r(651),i=r(6971),s=r(5453),a=r(3954),d=r(1712);function c(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",pre:"pre"},(0,i.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"virtuallist虚拟列表",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#virtuallist虚拟列表",children:"#"}),"VirtualList虚拟列表"]}),"\n",(0,t.jsx)(n.p,{children:"滚动加载无限长列表，能够提高数据量大时候长列表的性能。"}),"\n",(0,t.jsxs)(n.h2,{id:"基本使用",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data"}),"：指定数据源数组"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"height"}),"：指定列表（即可视区域）高度"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"itemHeight"}),"：子项等高模式下指定子项高度"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"renderItem"}),"：指定子项的渲染函数，接受2个参数",(0,t.jsx)(n.code,{children:"(item, index)"}),"对应",(0,t.jsx)(n.code,{children:"data"}),"中的一项"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"requeestMpre"}),"：指定异步加载数据的方法"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"itemKey"}),"：指定作为子项key的值在",(0,t.jsx)(n.code,{children:"item"}),"中对应的属性字段，"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gap"}),"：指定子项的间隔（会被转化为上下padding，值为1/2 * gap）"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onscroll"}),"：指定滚动触发的事件"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"fixedHeight"}),"：指定是否为子项等高模式"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"estimatedHeight"}),"：不等高模式下，子项的预测高度，不宜过大或过小"]}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"等高",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#等高",children:"#"}),"等高"]}),"\n",(0,t.jsxs)(d.Z,{isMobile:"false",demoId:"_components_mds_VirtualList_1",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",meta:"",children:"import React from 'react';\r\nimport { VirtualList } from '@nan-design/react';\r\nimport { List, Avatar } from 'antd';\r\nconst LEN = 100;\r\nconst fakeDataUrl =\r\n    'https://randomuser.me/api/?results=20&inc=name,gender,email,nat,picture&noinfo';\r\nconst ContainerHeight = 400;\r\n\r\nconst ListTest = () => {\r\n    const renderItem = (item, index) => {\r\n        return (\r\n            <List.Item style={{ height: heights[index] }}>\r\n                <List.Item.Meta\r\n                    avatar={<Avatar src={item.picture.large} />}\r\n                    title={<a href=\"javascript;\">{item.name.last}</a>}\r\n                    description={item.email}\r\n                />\r\n                <div>Content</div>\r\n            </List.Item>\r\n        );\r\n    };\r\n    const [data, setData] = React.useState([]);\r\n    const [heights, setHeights] = React.useState([]);\r\n\r\n    const appendData = () => {\r\n        setTimeout(() => {\r\n            fetch(fakeDataUrl)\r\n                .then((res) => res.json())\r\n                .then((body) => {\r\n                    setData(data.concat(body.results));\r\n                    setHeights(\r\n                        heights.concat(\r\n                            body.results.map(() => {\r\n                                return (Math.random() * 2 + 1) * 40;\r\n                            })\r\n                        )\r\n                    );\r\n                });\r\n        }, 1000);\r\n    };\r\n\r\n    return (\r\n        <List>\r\n            <VirtualList\r\n                fixedHeight={true}\r\n                renderItem={renderItem}\r\n                height={ContainerHeight}\r\n                itemHeight={50}\r\n                data={data}\r\n                gap={20}\r\n                itemKey=\"email\"\r\n                requestMore={appendData}\r\n                style={{ width: '200px', height: '200px' }}\r\n            ></VirtualList>\r\n        </List>\r\n    );\r\n};\r\nexport default ListTest;\n"})}),(0,t.jsx)(s.Z,{})]}),"\n",(0,t.jsxs)(n.h2,{id:"不等高",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#不等高",children:"#"}),"不等高"]}),"\n",(0,t.jsxs)(d.Z,{isMobile:"false",demoId:"_components_mds_VirtualList_2",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",meta:"",children:"import React from 'react';\r\nimport { VirtualList } from '@nan-design/react';\r\nimport { List, Avatar } from 'antd';\r\nconst LEN = 100;\r\nconst fakeDataUrl =\r\n    'https://randomuser.me/api/?results=20&inc=name,gender,email,nat,picture&noinfo';\r\nconst ContainerHeight = 400;\r\n\r\nconst ListTest = () => {\r\n    const renderItem = (item, index) => {\r\n        return (\r\n            <List.Item style={{ height: heights[index] }}>\r\n                <List.Item.Meta\r\n                    avatar={<Avatar src={item.picture.large} />}\r\n                    title={<a href=\"javascript;\">{item.name.last}</a>}\r\n                    description={item.email}\r\n                />\r\n                <div>Content</div>\r\n            </List.Item>\r\n        );\r\n    };\r\n    const [data, setData] = React.useState([]);\r\n    const [heights, setHeights] = React.useState([]);\r\n\r\n    const appendData = () => {\r\n        setTimeout(() => {\r\n            fetch(fakeDataUrl)\r\n                .then((res) => res.json())\r\n                .then((body) => {\r\n                    setData(data.concat(body.results));\r\n                    setHeights(\r\n                        heights.concat(\r\n                            body.results.map(() => {\r\n                                return (Math.random() * 2 + 1) * 40;\r\n                            })\r\n                        )\r\n                    );\r\n                });\r\n        }, 1000);\r\n    };\r\n\r\n    return (\r\n        <List>\r\n            <VirtualList\r\n                fixedHeight={false}\r\n                renderItem={renderItem}\r\n                height={ContainerHeight}\r\n                itemHeight={50}\r\n                data={data}\r\n                gap={20}\r\n                itemKey=\"email\"\r\n                requestMore={appendData}\r\n                style={{ width: '200px', height: '200px' }}\r\n            ></VirtualList>\r\n        </List>\r\n    );\r\n};\r\nexport default ListTest;\n"})}),(0,t.jsx)(a.Z,{})]}),"\n",(0,t.jsxs)(n.h2,{id:"注意",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#注意",children:"#"}),"注意"]}),"\n",(0,t.jsxs)(n.p,{children:["请在使用时传入",(0,t.jsx)(n.code,{children:"itemKey"}),"，这对应你传入的",(0,t.jsx)(n.code,{children:"data"}),"中单项的一个属性，保证它是唯一的。\r\n或者选择在",(0,t.jsx)(n.code,{children:"renderItem"}),"返回的元素中手动传入",(0,t.jsx)(n.code,{children:"key"}),"值，不推荐使用",(0,t.jsx)(n.code,{children:"index"}),"作为",(0,t.jsx)(n.code,{children:"key"})]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(c,e)})):c(e)}let l=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["components%2Fmds%2FVirtualList.mdx"]={toc:[{id:"基本使用",text:"基本使用",depth:2},{id:"等高",text:"等高",depth:2},{id:"不等高",text:"不等高",depth:2},{id:"注意",text:"注意",depth:2}],title:"VirtualList虚拟列表",frontmatter:{}}}}]);